<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>freegeoip.net: FREE IP Geolocation Web Service</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 10px;
        padding-bottom: 40px;
      }

      /* Custom container */
      .container-narrow {
        margin: 0 auto;
        max-width: 700px;
      }
      .container-narrow > hr {
        margin: 30px 0;
      }

      /* Main marketing message and sign up button */
      .jumbotron {
        margin: 20px 0;
        text-align: center;
      }
      .jumbotron h1 {
        font-size: 72px;
        line-height: 1;
      }
      .jumbotron .btn {
        font-size: 21px;
        padding: 14px 24px;
      }

      /* Supporting marketing content */
      .marketing {
        margin: 20px 0;
      }
      .marketing p + h4 {
        margin-top: 28px;
      }
    </style>

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="container-narrow">
      <div class="masthead">
        <h1 class="pull-left">freegeoip.net</h1>
        <form class="form-search pull-right" style="margin-top:20px" id="ip_form">
          <input type="text" class="focused" id="ip_addr" placeholder="IP or Hostname">
          <button type="submit" class="btn btn-primary">Search</button>
        </form>
      </div>

      <div class="jumbotron">
        <iframe id="map" width="99%" frameborder="0" scrolling="no"
                marginwidth="0" marginheight="0" src=""></iframe>
      </div>

      <div class="row-fluid marketing">
        <div class="span6">
          <div id="info"></div>
        </div>

        <div class="span6">
          <h4>About</h4>
          <p>This is a public web service for searching
             <a href="http://en.wikipedia.org/wiki/Geolocation_software">geolocation</a> of IP addresses
             and host names.</p>
          <p>The system has an internal database with geolocation information, which is queried via the
             web service. There's no magic or tricky calculations, it's just a database. And although
             the database is very accurate, don't expect it to be perfect.</p>
          <p>This service includes GeoLite and ASN data created by MaxMind, available from
             <a href="http://www.maxmind.com">maxmind.com</a>.</p>
             <p><small>Last updated: March 2013</small></p>
        </div>
      </div>

      <div class="row-fluid marketing">
        <div class="span6">
          <h4>Usage <small>(for developers)</small></h4>
          <p>Make HTTP GET requests to: <code>http://freegeoip.net/{format}/{ip_or_hostname}</code></p>
          <p>Supported formats are <code>csv</code>, <code>xml</code> or <code>json</code>.</p>
		  <p>The <i>ip_or_hostname</i> part is optional, and your own IP is searched if one is not provided.</p>
		  <p>To receive ASN information add asn=true as a GET parameter to the request url.</p>
        </div>

        <div class="span6">
          <h4>Limits</h4>
          <p>Due to the high volume of queries we've implemented a throttling
             mechanism, which allows at most <b>10.000 queries per hour</b>. After reaching
             this hourly quota, all your requests result in HTTP 403 (Forbidden)
             until it clears up on the next roll over.</p>
        </div>
      </div>

      <p>There's absolutely no plans of selling services here. If this limit
         is a problem for you, please consider running your very own instance
         of this system. It's open source and freely available at GitHub.</p>
      <a href="https://github.com/fiorix/freegeoip">Check out the source code</a>

      <h3>Contact</h3>
      <p>Feel free to share comments, suggestions or any other feedback.
         <a href="https://github.com/fiorix/">I'm here.</a></p>

      <p>Contribute with code, pizza, gifts or donations.</p>
      <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
      <input type="hidden" name="cmd" value="_s-xclick">
      <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----
">
      <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
      <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
      </form>

      <hr>

      <footer>
        <p>This web site and all documentation is licensed under
        <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons 3.0</a>.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>
    <script>
      function geoip(ip, success_cb, failure_cb) {
        $.getJSON("/json/"+(ip!=null?ip:'')+"?asn=true",
        function(rs){
          success_cb(rs, ip);
        })
        .error(function(e){
          failure_cb(e, ip);
        });
      }

      var mapurl = "http://maps.google.com/maps?f=q&source=s_q&hl=en&geocode=&ie=UTF8&iwloc=A&output=embed&";
      var err_403 = '<h4>Ooops!</h4>'+
      	  '<div class="alert alert-error">Over quota</div>'+
          '<p>You are currently over quota due to the high '+
          'volume of requests.</p>'+
          '<p>This service is public and free with a hard limit '+
          'of 10.000 requests per hour, and you\'ve reached your quota.</p>'+
          '<p>Check out the <i>Limits</i> section below for more information</p>';

      var err_msg = '<h4>Ooops!</h4>'+
          '<div class="alert alert-warning">Service Unavailable</div>'+
          '<p>The service is unavailable due to maintenance or '+
          'because the servers are overloaded.</p>'+
          '<p>We appologize for the inconvenience. Try again later.</p>';

      function no_results(addr)
      {
        addr = addr!=null?addr:'your IP address';
        var msg = '<h4>Ooops!</h4>'+
	    '<div class="alert alert-block">No results for <i>'+addr+'</i></div>'+
            '<p>Try one of the following:</p>'+
            '<ul>'+
            '<li>Make sure you enter a valid IP address, or</li>'+
            '<li>A valid host name, or domain name (e.g: google.com)</li>'+
            '<ul>';
        return msg;
      }

      function search_success(rs, ip) {
        if (rs.ip) {
          $("#ip_addr").attr("value", rs.ip);
        }

        var qs = "";
        var zoom = 2;
        if (rs.country_name && rs.country_code != "RD") {
          if (rs.region_name) {
            if (rs.city) {
              zoom = 6;
              qs = rs.city+","+rs.region_name+","+rs.country_name;
            } else {
              zoom = 4;
              qs = rs.region_name+","+rs.country_name;
            }
          } else {
            if ((rs.latitude != 0) && (rs.longitude != 0)) {
              var lat = new Number(rs.latitude).toFixed(2);
              var lon = new Number(rs.longitude).toFixed(2);
              qs = lat+" "+lon;
            } else {
              qs = rs.country_name;
            }
          }

          if (!rs.metrocode) {
            rs.metrocode = "-";
          }

          if (!rs.areacode) {
            rs.areacode = "-";
          }

          var msg = '<h4>Estimated location:</h4>'+
            '<table class="table table-striped"><tbody>'+
            '<tr><td>Country</td><td>'+rs.country_name+(rs.country_code?'('+rs.country_code+')':'')+'</td></tr>'+
            '<tr><td>Region</td><td>'+rs.region_name+(rs.region_code?'('+rs.region_code+')':'')+'</td></tr>'+
            '<tr><td>City</td><td>'+rs.city+'</td></tr>'+
            '<tr><td>Zip code</td><td>'+rs.zipcode+'</td></tr>'+
            '<tr><td>Latitude, Longitude</td><td>'+rs.latitude+", "+rs.longitude+'</td></tr>'+
			'<tr><td>Metro and Area codes</td><td>'+[rs.metrocode, rs.areacode].join(" ")+'</td></tr>'+
			'<tr><td>ASN</td><td>'+rs.asn_id+'</td></td>'+
			'<tr><td>ASN Name</td><td>'+rs.asn_name+'</td></td>'+
            '</tbody></table>';
          $("#info").html(msg);
        } else {
          qs = "africa";
          $("#info").html(no_results(ip));
        }

        $("#map").attr("src", mapurl+"z="+zoom+"&q="+qs);
      }

      function search_failure(e, ip) {
        switch(e.status) {
          case 400:
          case 404:
            $("#info").html(no_results(ip));
            break;
          case 403:
            $("#info").html(err_403);
            break;
          default:
            $("#info").html(err_msg);
        }
      }

      $(document).ready(function(){
        $("#ip_addr").focus();
        $("#map").height($("#map").width()/2);
        $("#ip_form").submit(function(){
          var ip = $("#ip_addr").val();
          geoip(ip, search_success, search_failure);
          return false;
        });

        // search your own ip on load
        geoip(null, search_success, search_failure);
      });
    </script>

    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-10475047-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>

  </body>
</html>

